!function(e){var t={};function r(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(o,n,function(t){return e[t]}.bind(null,n));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";r.r(t);r(1);const o=()=>fetch("./scripts/products.json").then(e=>e.json()).then(e=>n(e.products)),n=e=>{let t=document.querySelector("#productsSearch").value;const r=a(e[t]);h(r)};o(),document.querySelector("#productsSearch").addEventListener("change",e=>{switch(e.target.value){case"sofas":case"televisions":case"fridges":case"washingmachines":c=[],p(),o()}});let i=[],c=[];const s=[];let d=[];class l{constructor(e,t,r,o,n,i,c,s){this.id=e,this.title=t,this.image=r,this.price=o,this.type=n,this.stars=i,this.description=c,this.delivery=s}}const a=e=>{for(let t=0;t<e.length;t++)c[t]=new l(e[t].id,e[t].title,e[t].image,e[t].price,e[t].type,e[t].stars,e[t].description,e[t].delivery);return c},u=e=>{let t=document.querySelectorAll(".storeFront__productArea__products__product"),r=document.querySelector(".header__accountSettings__account"),o=document.querySelector(".header__accountSettings__account__hover"),n=document.querySelector(".header__accountSettings__wishlist"),l=document.querySelector(".header__accountSettings__wishlist__hover"),a=document.querySelector(".header__accountSettings__trolley"),u=document.querySelector(".header__accountSettings__trolley__hover"),p=document.querySelector(".storeFront__productArea__filterButtonMobile button"),_=document.querySelector(".storeFront__productArea__filterButtonMobile__active"),h=document.querySelector(".closer"),m=document.querySelector(".modalProductCloser");const v=document.querySelector(".productMoreInfoModal"),S=document.querySelector(".productMoreInfoModal__container"),g=document.querySelector(".storeFront__productArea__filterButtonMobile__active_menu__options");document.querySelectorAll(".trolleyRemoveButton").forEach(e=>{e.onclick=function(){let e=i.findIndex(e=>e.id===this.id);i.splice(e,1);let t=[...i];y(t,"trolley"),f(t,"trolley")}}),document.querySelectorAll(".favouritesRemoveButton").forEach(e=>{e.onclick=function(){let e=s.findIndex(e=>e.id===this.id);s.splice(e,1),y(s,"favourites"),f(s,"favourites");s.reduce((e,t)=>parseInt(t.price)+e,0)}});document.querySelector(".checkOutPayment").onclick=function(){alert("Apologies, this is a front end demo only and there is no payment system.")},_.addEventListener("click",e=>{_.classList.add("display")}),g.addEventListener("click",e=>{e.stopPropagation()}),p.addEventListener("click",e=>{_.classList.remove("display")}),h.addEventListener("click",e=>{_.classList.add("display")}),S.addEventListener("click",e=>{e.stopPropagation()}),m.addEventListener("click",e=>{v.classList.add("display")}),v.addEventListener("click",e=>{v.classList.add("display")}),r.addEventListener("mouseover",()=>{o.classList.remove("display")}),r.addEventListener("mouseout",()=>{o.classList.add("display")}),n.addEventListener("mouseover",()=>{s.length>0&&l.classList.remove("display")}),n.addEventListener("mouseout",()=>{l.classList.add("display")}),a.addEventListener("mouseover",()=>{i.length>0&&u.classList.remove("display")}),a.addEventListener("mouseout",()=>{u.classList.add("display")}),t.forEach(e=>e.addEventListener("click",t=>{if(t.target.classList.contains("productMoreInfo")){d[0]=e.id;let t=c.findIndex(e=>e.id===d[0]);!function(e){const t=document.querySelector(".productMoreInfoModal__title_h3"),r=document.querySelector(".productMoreInfoModal__price"),o=document.querySelector(".productMoreInfoModal__image"),n=document.querySelector(".productMoreInfoModal__about__description"),i=document.querySelector(".productMoreInfoModal__trolley"),c=document.querySelector(".productMoreInfoModal__fav");t.innerHTML=e.title,r.innerHTML=`<p>£${e.price}</p>`,o.innerHTML=`<img src="${e.image}" alt="${e.title}">`,n.innerHTML=`<p>${e.description}</p>`,i.innerHTML=`<button  class="btn addProduct" id="${e.id}"><i class="fa fa-shopping-cart" aria-hidden="true"></i> Add Trolley</button>`,c.innerHTML=`<button  class="btn favourite favouriteModel" id="${e.id}"><i class="fa fa-heart" aria-hidden="true"></i> Add Favourites</button>`}(c[t]),v.classList.remove("display"),r=c[t],document.querySelector(".addProduct").addEventListener("click",e=>{i.push(r),i.length>0&&y(i,"trolley"),f(i,"trolley")}),document.querySelector(".favouriteModel").addEventListener("click",e=>{s.push(r),s.length>0&&y(s,"favourites"),f(s,"favourites")})}var r}));const L=document.querySelectorAll(".addedToTrolleyConfirmation"),q=document.querySelectorAll(".addedToFavouritesConfirmation");t.forEach((e,t)=>{e.addEventListener("click",e=>{e.target.classList.contains("add")&&(e.stopPropagation(),L[t].classList.remove("display"),setTimeout(()=>{L[t].classList.add("display")},2e3),i.push(c[t]),i.length>0&&(y(i,"trolley"),localStorage.setItem("trolleyItems",JSON.stringify(i))),f(i,"trolley")),e.target.classList.contains("favourite")&&(e.stopPropagation(),q[t].classList.remove("display"),setTimeout(()=>{q[t].classList.add("display")},2e3),s.push(c[t]),s.length>0&&y(s,"favourites"),f(s,"favourites"))})})};function p(){document.querySelectorAll('input[name*="star"],input[name*="delivery"],input[name*="price"]').forEach(e=>{e.checked=!1,_={}})}document.querySelector("#filter").addEventListener("change",e=>{"high"===e.target.value?(c.sort((e,t)=>e.price-t.price),p(),h(c)):(c.sort((e,t)=>e.price-t.price).reverse(),p(),h(c))}),window.addEventListener("resize",(function(e){window.innerWidth>999&&(p(),h(c))}));let _={};document.querySelectorAll('input[name*="star"],input[name*="delivery"],input[name*="price"]').forEach(e=>{e.oninput=function(){if(this.checked)this.name in _||(_[this.name]=[]),_[this.name].push(this.value);else{let e=_[this.name].findIndex(e=>e==this.name);_[this.name].splice(e,1)}let e=[...c];_.stars&&_.stars.length&&(e=e.filter(e=>_.stars.includes(e.stars))),_.delivery&&_.delivery.length&&(e=e.filter(e=>_.delivery.includes(e.delivery))),_.price&&_.price.length&&(e=e.filter(e=>_.price.some(t=>{let[r,o]=t.split("_");return+e.price>+r&&+e.price<+o}))),h(e)}});const y=(e,t)=>{let r;const o=document.querySelector(".checkProducts");"trolley"===t&&(r=document.querySelector(".header__accountSettings__trolley__hover")),"favourites"===t&&(r=document.querySelector(".header__accountSettings__wishlist__hover"));let n=e.reduce((e,t)=>e+parseInt(t.price),0),c=e.reduce((e,t,r)=>(t.id in e||(e[t.id]=[]),e[t.id].push(t),e),{}),d="";for(let e in c){let r="";for(let t=0;t<c[e][0].stars;t++)r+='<i class="fa fa-star-o" aria-hidden="true"></i>';d+=`<div class="addedToTrolleyDropDown">\n               <img src="${c[e][0].image}">\n                 <div class="titleQtyContainer">\n                     <h4>${c[e][0].title}</h4>\n                     <p>${r}</p>\n                 </div>\n               <p>${c[e].length}</p>\n               <i class="fa fa-times ${t}RemoveButton" id=${c[e][0].id} aria-hidden="true"></i> \n            </div>`}d+=`<p class="subTotal">Subtotal (${e.length} items): £${n}</p>`,"trolley"===t&&(o.innerHTML=d),"trolley"===t&&(d+='<button class="checkoutButton">Checkout</button>'),r.innerHTML=d,function(){const e=document.querySelector(".header__accountSettings__trolley__hover"),t=document.querySelector(".checkoutButton"),r=document.querySelector(".checkoutModal"),o=document.querySelector(".modalCloser"),n=document.querySelector(".checkoutModal__container");document.querySelectorAll(".trolleyRemoveButton").forEach(e=>{e.onclick=function(){let e=i.findIndex(e=>e.id===this.id);i.splice(e,1);let t=[...i];y(t,"trolley"),f(t,"trolley")}}),document.querySelectorAll(".favouritesRemoveButton").forEach(e=>{e.onclick=function(){let e=s.findIndex(e=>e.id===this.id);s.splice(e,1),y(s,"favourites"),f(s,"favourites");s.reduce((e,t)=>parseInt(t.price)+e,0)}}),e.addEventListener("click",e=>{e.target===t&&(i.length>0?r.classList.remove("display"):alert("Your backet is empty, please add products to your basket."))}),o.addEventListener("click",()=>{r.classList.add("display")}),r.addEventListener("click",()=>{r.classList.add("display")}),n.addEventListener("click",e=>{e.stopPropagation()})}()};const f=(e,t)=>{let r;"trolley"===t&&(r=document.querySelector(".header__accountSettings__trolley__counter")),"favourites"===t&&(r=document.querySelector(".header__accountSettings__wishlist__counter")),e.length>0?(r.classList.remove("display"),r.innerHTML=`<div class="${t}Counter">${e.length}</div>`):r.classList.add("display")},h=e=>{const t=document.querySelector(".breadcrumb__name"),r=document.querySelector("#productTitle");let o;if(e.length>0){r.textContent=e[0].type,t.textContent=e[0].type;document.querySelector("#numberOfProducts").textContent=`Showing ${e.length} products`,o="";for(let t=0;t<e.length;t++){let r="";for(let o=0;o<e[t].stars;o++)r+='<i class="fa fa-star-o" aria-hidden="true"></i>';o+=`<div class="storeFront__productArea__products__product" id="${e[t].id}">\n                <img class="productMoreInfo" src="${e[t].image}">\n                  <div class="storeFront__productArea__products__product__description">\n                    <h3 class="storeFront__productArea__products__product__title productMoreInfo">${e[t].title}</h3>\n                    <div class="storeFront__productArea__products__product__stars productMoreInfo">\n\n                    ${r}\n                    \n                  </div>\n                  <h4 class="storeFront__productArea__products__product__price productMoreInfo">£${e[t].price}</h4>\n                  <h3 class="storeFront__productArea__products__product__special productMoreInfo">${e[t].delivery}</h3>\n                  <div>\n                      <button class="btn add" data-id="${e[t].id}"><i class="fa fa-shopping-cart" aria-hidden="true"></i> Add to Trolley</button>\n                      <button class="btn favourite"><i class="fa fa-heart" aria-hidden="true"></i></button>\n                  </div>\n              </div>\n              <div class="addedToTrolleyConfirmation display">Added to trolley</div>\n              <div class="addedToFavouritesConfirmation display">Added to favourites</div>\n            </div>\n            `}}else{r.textContent="No products found",t.textContent="No Products";document.querySelector("#numberOfProducts").textContent=`Showing ${e.length} products`,o="<h2>No products found matching those filter settings</h2>"}document.querySelector(".storeFront__productArea__products").innerHTML=o,document.querySelectorAll(".storeFront__productArea__products__product__special").forEach(e=>{"Express"===e.innerHTML?e.classList.add("green"):e.classList.add("red")}),u()}},function(e,t,r){}]);
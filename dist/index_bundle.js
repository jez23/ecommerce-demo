!function(e){var t={};function r(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(o,n,function(t){return e[t]}.bind(null,n));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";r.r(t);var o=e=>{const t=document.querySelector(".breadcrumb__name"),r=document.querySelector("#productTitle");let o="";if(e.length>0){r.textContent=e[0].type,t.textContent=e[0].type;document.querySelector("#numberOfProducts").textContent=`Showing ${e.length} products`;for(let t=0;t<e.length;t++){let r="";for(let o=0;o<e[t].stars;o++)r+='<i class="fa fa-star-o" aria-hidden="true"></i>';o+=`<div class="storeFront__productArea__products__product" id="${e[t].id}">\n                    <img class="productMoreInfo" src="${e[t].image}">\n                      <div class="storeFront__productArea__products__product__description">\n                        <h3 class="storeFront__productArea__products__product__title productMoreInfo">${e[t].title}</h3>\n                        <div class="storeFront__productArea__products__product__stars productMoreInfo">\n    \n                        ${r}\n                        \n                      </div>\n                      <h4 class="storeFront__productArea__products__product__price productMoreInfo">£${e[t].price}</h4>\n                      <h3 class="storeFront__productArea__products__product__special productMoreInfo">${e[t].delivery}</h3>\n                      <div>\n                          <button class="btn add" data-id="${e[t].id}"><i class="fa fa-shopping-cart" aria-hidden="true"></i> Add to Trolley</button>\n                          <button class="btn favourite"><i class="fa fa-heart" aria-hidden="true"></i></button>\n                      </div>\n                  </div>\n                  <div class="addedToTrolleyConfirmation display">Added to trolley</div>\n                  <div class="addedToFavouritesConfirmation display">Added to favourites</div>\n                </div>\n                `}}else{r.textContent="No products found",t.textContent="No Products";document.querySelector("#numberOfProducts").textContent=`Showing ${e.length} products`,o="<h2>No products found matching those filter settings</h2>"}document.querySelector(".storeFront__productArea__products").innerHTML=o,document.querySelectorAll(".storeFront__productArea__products__product__special").forEach(e=>{"Express"===e.innerHTML?e.classList.add("green"):e.classList.add("red")})};var n=class{constructor(e,t,r,o,n,c,i,s){this.id=e,this.title=t,this.image=r,this.price=o,this.type=n,this.stars=c,this.description=i,this.delivery=s}};var c=(e,t)=>{let r,o;"trolley"===t&&(r=document.querySelector(".header__accountSettings__trolley__counter"),o=e.trolley),"favourites"===t&&(r=document.querySelector(".header__accountSettings__wishlist__counter"),o=e.favourites),o.length>0?(r.classList.remove("display"),r.innerHTML=`<div class="${t}Counter">${o.length}</div>`):r.classList.add("display")};var i=e=>{const t=document.querySelector(".header__accountSettings__trolley__hover"),r=document.querySelector(".checkoutButton"),o=document.querySelector(".checkoutModal"),n=document.querySelector(".modalCloser"),i=document.querySelector(".checkoutModal__container");document.querySelectorAll(".trolleyRemoveButton").forEach(t=>{t.onclick=function(){let t=e.trolley.findIndex(e=>e.id===this.id);e.trolley.splice(t,1),s(e,"trolley"),c(e,"trolley")}}),document.querySelectorAll(".favouritesRemoveButton").forEach(t=>{t.onclick=function(){let t=e.favourites.findIndex(e=>e.id===this.id);e.favourites.splice(t,1),s(e,"favourites"),c(e,"favourites");e.favourites.reduce((e,t)=>parseInt(t.price)+e,0)}}),t.addEventListener("click",t=>{t.target===r&&(e.trolley.length>0?o.classList.remove("display"):alert("Your backet is empty, please add products to your basket."))}),n.addEventListener("click",()=>{o.classList.add("display")}),o.addEventListener("click",()=>{o.classList.add("display")}),i.addEventListener("click",e=>{e.stopPropagation()})};var s=(e,t)=>{let r,o;const n=document.querySelector(".checkProducts");"trolley"===t&&(r=document.querySelector(".header__accountSettings__trolley__hover"),o=e.trolley),"favourites"===t&&(r=document.querySelector(".header__accountSettings__wishlist__hover"),o=e.favourites);let c=o.reduce((e,t)=>e+parseInt(t.price),0),s=o.reduce((e,t,r)=>(t.id in e||(e[t.id]=[]),e[t.id].push(t),e),{}),d="";for(let e in s){let r="";for(let t=0;t<s[e][0].stars;t++)r+='<i class="fa fa-star-o" aria-hidden="true"></i>';d+=`<div class="addedToTrolleyDropDown">\n                   <img src="${s[e][0].image}">\n                     <div class="titleQtyContainer">\n                         <h4>${s[e][0].title}</h4>\n                         <p>${r}</p>\n                     </div>\n                   <p>${s[e].length}</p>\n                   <i class="fa fa-times ${t}RemoveButton" id=${s[e][0].id} aria-hidden="true"></i> \n                </div>`}d+=`<p class="subTotal">Subtotal (${o.length} items): £${c}</p>`,"trolley"===t&&(n.innerHTML=d),"trolley"===t&&(d+='<button class="checkoutButton">Checkout</button>'),r.innerHTML=d,i(e)};var d=e=>{const t=document.querySelector(".productMoreInfoModal__title_h3"),r=document.querySelector(".productMoreInfoModal__price"),o=document.querySelector(".productMoreInfoModal__image"),n=document.querySelector(".productMoreInfoModal__about__description"),c=document.querySelector(".productMoreInfoModal__trolley"),i=document.querySelector(".productMoreInfoModal__fav");t.innerHTML=e.title,r.innerHTML=`<p>£${e.price}</p>`,o.innerHTML=`<img src="${e.image}" alt="${e.title}">`,n.innerHTML=`<p>${e.description}</p>`,c.innerHTML=`<button  class="btn addProduct" id="${e.id}"><i class="fa fa-shopping-cart" aria-hidden="true"></i> Add Trolley</button>`,i.innerHTML=`<button  class="btn favourite favouriteModel" id="${e.id}"><i class="fa fa-heart" aria-hidden="true"></i> Add Favourites</button>`};var l=(e,t)=>{let r=document.querySelectorAll(".storeFront__productArea__products__product"),o=document.querySelector(".header__accountSettings__account"),n=document.querySelector(".header__accountSettings__account__hover"),i=document.querySelector(".header__accountSettings__wishlist"),l=document.querySelector(".header__accountSettings__wishlist__hover"),a=document.querySelector(".header__accountSettings__trolley"),u=document.querySelector(".header__accountSettings__trolley__hover"),p=document.querySelector(".storeFront__productArea__filterButtonMobile button"),_=document.querySelector(".storeFront__productArea__filterButtonMobile__active"),y=document.querySelector(".closer"),f=document.querySelector(".modalProductCloser");const v=document.querySelector(".productMoreInfoModal"),h=document.querySelector(".productMoreInfoModal__container"),m=document.querySelector(".storeFront__productArea__filterButtonMobile__active_menu__options");document.querySelectorAll(".trolleyRemoveButton").forEach(t=>{t.onclick=function(){let t=e.trolley.findIndex(e=>e.id===this.id);e.trolley.splice(t,1);e.trolley;s(e,"trolley"),c(e,"trolley")}}),document.querySelectorAll(".favouritesRemoveButton").forEach(t=>{t.onclick=function(){let t=e.favourites.findIndex(e=>e.id===this.id);e.favourites.splice(t,1),s(e,"favourites"),c(e,"favourites");favourites.reduce((e,t)=>parseInt(t.price)+e,0)}});document.querySelector(".checkOutPayment").onclick=function(){alert("Apologies, this is a front end demo only and there is no payment system.")},_.addEventListener("click",e=>{_.classList.add("display")}),m.addEventListener("click",e=>{e.stopPropagation()}),p.addEventListener("click",e=>{_.classList.remove("display")}),y.addEventListener("click",e=>{_.classList.add("display")}),h.addEventListener("click",e=>{e.stopPropagation()}),f.addEventListener("click",e=>{v.classList.add("display")}),v.addEventListener("click",e=>{v.classList.add("display")}),o.addEventListener("mouseover",()=>{n.classList.remove("display")}),o.addEventListener("mouseout",()=>{n.classList.add("display")}),i.addEventListener("mouseover",()=>{e.favourites.length>0&&l.classList.remove("display")}),i.addEventListener("mouseout",()=>{l.classList.add("display")}),a.addEventListener("mouseover",()=>{e.trolley.length>0&&u.classList.remove("display")}),a.addEventListener("mouseout",()=>{u.classList.add("display")}),r.forEach(t=>t.addEventListener("click",r=>{if(r.target.classList.contains("productMoreInfo")){e.currentlySelectedItem[0]=t.id;let r=e.currentOnScreenProducts.findIndex(t=>t.id===e.currentlySelectedItem[0]);d(e.currentOnScreenProducts[r]),v.classList.remove("display"),function(e,t){document.querySelector(".addProduct").addEventListener("click",r=>{t.trolley.push(e),t.trolley.length>0&&s(t,"trolley"),c(t,"trolley")}),document.querySelector(".favouriteModel").addEventListener("click",r=>{t.favourites.push(e),t.favourites.length>0&&s(t,"favourites"),c(t,"favourites")})}(e.currentOnScreenProducts[r],e)}}));const S=document.querySelectorAll(".addedToTrolleyConfirmation"),g=document.querySelectorAll(".addedToFavouritesConfirmation");r.forEach((t,r)=>{t.addEventListener("click",t=>{t.target.classList.contains("add")&&(t.stopPropagation(),S[r].classList.remove("display"),setTimeout(()=>{S[r].classList.add("display")},2e3),e.trolley.push(e.currentOnScreenProducts[r]),e.trolley.length>0&&(s(e,"trolley"),localStorage.setItem("trolleyItems",JSON.stringify(e.trolley))),c(e,"trolley")),t.target.classList.contains("favourite")&&(t.stopPropagation(),g[r].classList.remove("display"),setTimeout(()=>{g[r].classList.add("display")},2e3),e.favourites.push(e.currentOnScreenProducts[r]),e.favourites.length>0&&s(e,"favourites"),c(e,"favourites"))})})};const a=()=>fetch("./scripts/products.json").then(e=>e.json()).then(e=>u(e.products)).catch(e=>{throw e});a();const u=e=>{let t=document.querySelector("#productsSearch").value;_(e[t]),o(p.currentOnScreenProducts),l(p)},p={trolley:[],currentOnScreenProducts:[],favourites:[],currentlySelectedItem:[],executed:!1};document.querySelector("#productsSearch").addEventListener("change",e=>{switch(e.target.value){case"sofas":case"televisions":case"fridges":case"washingmachines":p.currentOnScreenProducts=[],y(),a()}});const _=e=>{const t=[...e];for(let r=0;r<e.length;r++)p.currentOnScreenProducts[r]=new n(t[r].id,t[r].title,t[r].image,t[r].price,t[r].type,t[r].stars,t[r].description,t[r].delivery);return p.currentOnScreenProducts};function y(){document.querySelectorAll('input[name*="star"],input[name*="delivery"],input[name*="price"]').forEach(e=>{e.checked=!1,f={}})}document.querySelector("#filter").addEventListener("change",e=>{"high"===e.target.value?(p.currentOnScreenProducts.sort((e,t)=>e.price-t.price),y(),o(p.currentOnScreenProducts),l(p)):(p.currentOnScreenProducts.sort((e,t)=>e.price-t.price).reverse(),y(),o(p.currentOnScreenProducts),l(p))}),window.addEventListener("resize",(function(e){window.innerWidth>999&&(y(),o(p.currentOnScreenProducts),l(p))}));let f={};document.querySelectorAll('input[name*="star"],input[name*="delivery"],input[name*="price"]').forEach(e=>{e.oninput=function(){if(this.checked)this.name in f||(f[this.name]=[]),f[this.name].push(this.value);else{let e=f[this.name].findIndex(e=>e==this.name);f[this.name].splice(e,1)}let e=[...p.currentOnScreenProducts];f.stars&&f.stars.length&&(e=e.filter(e=>f.stars.includes(e.stars))),f.delivery&&f.delivery.length&&(e=e.filter(e=>f.delivery.includes(e.delivery))),f.price&&f.price.length&&(e=e.filter(e=>f.price.some(t=>{let[r,o]=t.split("_");return+e.price>+r&&+e.price<+o}))),o(e),l(p)}})}]);